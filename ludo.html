<!DOCTYPE html><html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>ErikAI Ludo – Mega režim</title>
  <style>
    body { font-family: sans-serif; background: #f2f2f2; text-align: center; }
    h1 { color: #006666; margin-top: 1rem; }
    select, button { padding: 0.5rem; font-size: 1rem; margin: 0.5rem; }
    canvas { background: white; border: 1px solid #ccc; display: block; margin: 1rem auto; }
  </style>
</head>
<body>
  <h1>ErikAI Ludo – Mega režim</h1>
  <div>
    Počet hráčov:
    <select id="playerCount">
      <option value="4">4 hráči</option>
      <option value="8">8 hráčov</option>
      <option value="12">12 hráčov</option>
    </select>
    <button onclick="rollDice()">Hod kockou 🎲</button>
  </div>
  <p id="status"></p>
  <canvas id="gameBoard" width="600" height="600"></canvas>  <script>
    const canvas = document.getElementById('gameBoard');
    const ctx = canvas.getContext('2d');
    const status = document.getElementById('status');
    const playerColors = [
      'red', 'blue', 'green', 'yellow', 'orange', 'purple', 'cyan', 'magenta',
      'lime', 'pink', 'gray', 'brown'
    ];
    let players = [];
    let activePlayer = 0;
    let diceRoll = 0;

    function resetGame(count) {
      players = [];
      const pos = [
        [0, 0], [11, 0], [0, 11], [11, 11],
        [5, 0], [11, 5], [5, 11], [0, 5],
        [3, 3], [8, 3], [8, 8], [3, 8]
      ];
      for (let i = 0; i < count; i++) {
        players.push({ color: playerColors[i], x: pos[i][0], y: pos[i][1], alive: true });
      }
      activePlayer = 0;
      drawBoard();
    }

    function drawBoard() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const cellSize = 50;
      ctx.strokeStyle = '#ccc';
      for (let i = 0; i < 12; i++) {
        for (let j = 0; j < 12; j++) {
          ctx.strokeRect(i * cellSize, j * cellSize, cellSize, cellSize);
        }
      }
      for (const p of players) {
        if (p.alive) {
          ctx.beginPath();
          ctx.moveTo(p.x * cellSize + 25, p.y * cellSize);
          ctx.lineTo(p.x * cellSize, p.y * cellSize + 50);
          ctx.lineTo(p.x * cellSize + 50, p.y * cellSize + 50);
          ctx.closePath();
          ctx.fillStyle = p.color;
          ctx.fill();
        }
      }
    }

    function rollDice() {
      diceRoll = Math.floor(Math.random() * 6) + 1;
      status.textContent = `Hráč ${activePlayer + 1} (${players[activePlayer].color}) hodil: ${diceRoll}. Klikni na pole, kam chceš ísť.`;
      canvas.onclick = movePlayer;
    }

    function movePlayer(event) {
      const cellSize = 50;
      const rect = canvas.getBoundingClientRect();
      const x = Math.floor((event.clientX - rect.left) / cellSize);
      const y = Math.floor((event.clientY - rect.top) / cellSize);

      const p = players[activePlayer];
      const dist = Math.abs(p.x - x) + Math.abs(p.y - y);
      if (dist === diceRoll) {
        const victim = players.find((other, i) => i !== activePlayer && other.x === x && other.y === y && other.alive);
        if (victim) {
          victim.alive = false;
          status.textContent += ` Vyhodil si hráča ${players.indexOf(victim) + 1} (${victim.color})!`;
        }
        p.x = x;
        p.y = y;
        drawBoard();
        nextTurn();
      } else {
        alert('Musíš ísť presne o toľko polí, koľko si hodil.');
      }
    }

    function nextTurn() {
      do {
        activePlayer = (activePlayer + 1) % players.length;
      } while (!players[activePlayer].alive);
      status.textContent += ` Na rade je hráč ${activePlayer + 1} (${players[activePlayer].color}).`;
      canvas.onclick = null;
    }

    document.getElementById('playerCount').addEventListener('change', (e) => {
      resetGame(parseInt(e.target.value));
    });

    resetGame(4);
  </script></body>
</html>
