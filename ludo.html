<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ErikAI Ludo ‚Äì Mega re≈æim</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #f2f2f2;
      margin: 0;
    }

    h1 {
      color: #2e6d70;
      margin-top: 1rem;
    }

    .controls {
      margin: 1rem;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(24, minmax(10px, 3.5vw));
      justify-content: center;
      margin: auto;
    }

    .cell {
      width: 100%;
      aspect-ratio: 1;
      border: 1px solid #ccc;
      position: relative;
    }

    .piece {
      width: 0;
      height: 0;
      border-left: 50% solid transparent;
      border-right: 50% solid transparent;
      border-bottom: 100% solid red;
      position: absolute;
      top: 10%;
      left: 10%;
      right: 10%;
      bottom: 10%;
      margin: auto;
    }
  </style>
</head>
<body>

<h1>ErikAI Ludo ‚Äì Mega re≈æim</h1>
<div class="controls">
  <label>Poƒçet hr√°ƒçov: 
    <select id="playerCount">
      <option>4 hr√°ƒçi</option>
      <option>6 hr√°ƒçov</option>
      <option selected>8 hr√°ƒçov</option>
      <option>10 hr√°ƒçov</option>
      <option>12 hr√°ƒçov</option>
    </select>
  </label>
  <button onclick="rollDice()">Hod kockou üé≤</button>
  <p id="diceInfo"></p>
</div>

<div id="board" class="board"></div>

<script>
  const boardSize = 24;
  const board = document.getElementById('board');
  const colors = ['red', 'blue', 'green', 'yellow', 'orange', 'purple', 'pink', 'cyan', 'brown', 'black', 'lime', 'gray'];
  let players = [];
  let currentPlayer = 0;
  let diceRoll = 0;

  function createBoard() {
    board.innerHTML = '';
    for (let row = 0; row < boardSize; row++) {
      for (let col = 0; col < boardSize; col++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.dataset.row = row;
        cell.dataset.col = col;
        cell.onclick = () => handleMove(row, col);
        board.appendChild(cell);
      }
    }
  }

  function placePlayers() {
    players = [];
    const count = parseInt(document.getElementById('playerCount').value);
    const colorList = colors.slice(0, count);
    const positions = [
      [0, 0], [0, boardSize - 1], [boardSize - 1, 0], [boardSize - 1, boardSize - 1],
      [0, Math.floor(boardSize / 2)], [Math.floor(boardSize / 2), 0],
      [Math.floor(boardSize / 2), boardSize - 1], [boardSize - 1, Math.floor(boardSize / 2)],
      [Math.floor(boardSize / 3), Math.floor(boardSize / 3)],
      [boardSize - 2, boardSize - 2], [2, boardSize - 3], [boardSize - 3, 2]
    ];

    for (let i = 0; i < count; i++) {
      players.push({ id: i + 1, color: colorList[i], row: positions[i][0], col: positions[i][1], alive: true });
    }
    drawPieces();
  }

  function drawPieces() {
    document.querySelectorAll('.cell').forEach(cell => cell.innerHTML = '');
    for (const p of players) {
      if (!p.alive) continue;
      const selector = `.cell[data-row="${p.row}"][data-col="${p.col}"]`;
      const cell = document.querySelector(selector);
      if (cell) {
        const piece = document.createElement('div');
        piece.className = 'piece';
        piece.style.borderBottomColor = p.color;
        cell.appendChild(piece);
      }
    }
  }

  function rollDice() {
    diceRoll = Math.floor(Math.random() * 6) + 1;
    const p = players[currentPlayer];
    document.getElementById('diceInfo').textContent = `Hr√°ƒç ${p.id} (${p.color}) hodil: ${diceRoll}. Klikni na pole, kam chce≈° √≠s≈•.`;
  }

  function handleMove(targetRow, targetCol) {
    if (diceRoll === 0) return;

    const p = players[currentPlayer];
    const dx = Math.abs(targetRow - p.row);
    const dy = Math.abs(targetCol - p.col);

    if (Math.max(dx, dy) === diceRoll) {
      const target = players.find(other => other.row === targetRow && other.col === targetCol && other.alive);
      if (target) {
        target.alive = false;
        alert(`Hr√°ƒç ${p.id} (${p.color}) vyhodil hr√°ƒça ${target.id} (${target.color})`);
      }
      p.row = targetRow;
      p.col = targetCol;
      drawPieces();
      diceRoll = 0;
      currentPlayer = (currentPlayer + 1) % players.length;
    }
  }

  document.getElementById('playerCount').addEventListener('change', () => {
    createBoard();
    placePlayers();
  });

  createBoard();
  placePlayers();
</script>
</body>
</html>
