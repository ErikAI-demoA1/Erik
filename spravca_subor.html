<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>üìÅ ErikAI Spr√°vca s√∫borov</title>
  <style>
    body {
      font-family: Arial;
      text-align: center;
      background: #f9f9f9;
    }
    h1 {
      color: darkred;
    }
    .file-box {
      border: 1px solid #ccc;
      margin: 20px auto;
      padding: 10px;
      width: 90%;
      max-width: 400px;
      background: white;
    }
    button {
      background-color: red;
      color: white;
      border: none;
      padding: 6px 12px;
      margin-top: 8px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>üìÅ ErikAI Spr√°vca s√∫borov</h1>
  <p>Vyber s√∫bory (obr√°zky, vide√°, apk, pdf...):</p>
  <input type="file" id="fileInput" multiple>
  <div id="fileContainer"></div>

  <script>
    // Naƒç√≠tanie zo storage pri otvoren√≠
    const ulozeneSubory = JSON.parse(localStorage.getItem("erikai_subory") || "[]");
    const fileContainer = document.getElementById("fileContainer");

    function zobrazSubory() {
      fileContainer.innerHTML = "";
      ulozeneSubory.forEach((subor, index) => {
        const box = document.createElement("div");
        box.className = "file-box";

        const typ = subor.typ;
        const obsah = subor.data;
        let element;

        if (typ.startsWith("image/")) {
          element = document.createElement("img");
          element.src = obsah;
          element.style.maxWidth = "100%";
        } else if (typ.startsWith("video/")) {
          element = document.createElement("video");
          element.src = obsah;
          element.controls = true;
          element.style.maxWidth = "100%";
        } else if (typ.startsWith("audio/")) {
          element = document.createElement("audio");
          element.src = obsah;
          element.controls = true;
        } else {
          element = document.createElement("p");
          element.textContent = "üì¶ S√∫bor: " + subor.meno;
        }

        box.appendChild(element);

        const meno = document.createElement("p");
        meno.textContent = subor.meno;
        box.appendChild(meno);

        const zmazat = document.createElement("button");
        zmazat.textContent = "Zmaza≈•";
        zmazat.onclick = () => {
          ulozeneSubory.splice(index, 1);
          localStorage.setItem("erikai_subory", JSON.stringify(ulozeneSubory));
          zobrazSubory();
        };
        box.appendChild(zmazat);

        fileContainer.appendChild(box);
      });
    }

    zobrazSubory();

    document.getElementById("fileInput").addEventListener("change", (e) => {
      const files = Array.from(e.target.files);
      const nacitajSubor = (file) => {
        const reader = new FileReader();
        reader.onload = function(event) {
          ulozeneSubory.push({
            meno: file.name,
            typ: file.type,
            data: event.target.result
          });
          localStorage.setItem("erikai_subory", JSON.stringify(ulozeneSubory));
          zobrazSubory();
        };
        reader.readAsDataURL(file);
      };
      files.forEach(nacitajSubor);
      e.target.value = ""; // reset input
    });
  </script>
</body>
</html>
