<!DOCTYPE html><html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>ErikAI Video Editor</title>
  <style>
    body { background: #111; color: white; font-family: sans-serif; text-align: center; }
    input, button { margin: 10px; padding: 8px; font-size: 16px; }
    video { width: 90%; margin: 10px auto; background: #222; }
  </style>
</head>
<body>
  <h2>üé¨ ErikAI Video Editor</h2>
  <p>Vyber si video, zobraz√≠ sa n√°hƒæad. Potom nastav √∫≈°ek a vystrihni.</p>  <input type="file" id="videoInput" accept="video/mp4"><video id="previewInput" controls preload="auto" type="video/mp4"></video><br>

  <input type="number" id="startTime" placeholder="Od (s)" value="0">
  <input type="number" id="endTime" placeholder="Do (s)" value="10">
  <br>
  <button onclick="striha≈•Video()">‚úÇ Strihn√∫≈• video</button>  <p id="status">‚åõ Pripraven√©</p>  <h3>üéûÔ∏è V√Ωstup:</h3>
  <video id="previewOutput" controls preload="auto" type="video/mp4"></video>
  <a id="downloadLink" download="strihnute_video.mp4" style="display:none; color: #0f0;">Stiahnu≈• video</a>  <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.6/dist/ffmpeg.min.js"></script>  <script>
    let videoURL;
    const { createFFmpeg, fetchFile } = FFmpeg;
    const ffmpeg = createFFmpeg({ log: true });

    document.getElementById('videoInput').addEventListener('change', () => {
      const file = document.getElementById('videoInput').files[0];
      const preview = document.getElementById('previewInput');
      if (file) {
        if (videoURL) URL.revokeObjectURL(videoURL);
        videoURL = URL.createObjectURL(file);
        preview.src = '';
        preview.load();
        preview.src = videoURL;
        preview.load();
      }
    });

    async function striha≈•Video() {
      const file = document.getElementById('videoInput').files[0];
      const start = document.getElementById('startTime').value;
      const end = document.getElementById('endTime').value;
      const status = document.getElementById('status');

      if (!file || !start || !end) {
        alert("Vyber video a zadaj rozsah.");
        return;
      }

      status.innerText = "‚è≥ Naƒç√≠tavam FFmpeg...";
      if (!ffmpeg.isLoaded()) await ffmpeg.load();

      ffmpeg.FS('writeFile', 'input.mp4', await fetchFile(file));

      status.innerText = "‚úÇ Strih√°m...";

      await ffmpeg.run(
        '-i', 'input.mp4',
        '-ss', `${start}`,
        '-to', `${end}`,
        '-c:v', 'libx264',
        '-c:a', 'aac',
        '-b:a', '192k',
        '-strict', 'experimental',
        'output.mp4'
      );

      const data = ffmpeg.FS('readFile', 'output.mp4');
      const videoBlob = new Blob([data.buffer], { type: 'video/mp4' });
      const outputUrl = URL.createObjectURL(videoBlob);

      const previewOut = document.getElementById('previewOutput');
      previewOut.src = '';
      previewOut.load();
      previewOut.src = outputUrl;
      previewOut.load();

      const link = document.getElementById('downloadLink');
      link.href = outputUrl;
      link.style.display = 'inline';

      status.innerText = "‚úÖ Hotovo!";
    }
  </script></body>
</html>
