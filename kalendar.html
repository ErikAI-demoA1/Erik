<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>ErikAI Kalend√°r</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f2f2f2;
      color: #222;
      padding: 20px;
      text-align: center;
    }
    h1 {
      margin-bottom: 10px;
    }
    .calendar {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
    }
    .month {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      width: 180px;
    }
    .month h3 {
      margin: 5px 0;
    }
    .days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 3px;
    }
    .day, .dow {
      padding: 5px;
      border-radius: 4px;
    }
    .dow {
      font-weight: bold;
    }
    .today { background: red; color: white; }
    .holiday { background: #00cc66; color: white; }
    .note { background: #ffeb3b; }
    .controls { margin: 10px 0; }
    .legend {
      font-size: 14px;
      margin-top: 15px;
    }
    .legend span {
      display: inline-block;
      padding: 3px 6px;
      margin: 0 5px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <h1>ErikAI Kalend√°r</h1>
  <div class="controls">
    <button onclick="changeYear(-1)">‚óÄ Rok sp√§≈•</button>
    <span id="yearDisplay"></span>
    <button onclick="changeYear(1)">Rok vpred ‚ñ∂</button>
  </div>

  <div id="calendar" class="calendar"></div>

  <div class="legend">
    <strong>Legenda:</strong>
    <span class="today">Dnes</span>
    <span class="holiday">Sviatok</span>
    <span class="note">Udalos≈•</span>
  </div>

  <p id="cas" style="margin-top: 15px; font-weight: bold;"></p>

  <script>
    const holidays = {
      "1.1": "Nov√Ω rok",
      "6.1": "Zjavenie P√°na",
      "1.5": "Sviatok pr√°ce",
      "8.5": "De≈à v√≠≈•azstva nad fa≈°izmom",
      "5.7": "Cyril a Metod",
      "29.8": "V√Ωroƒçie SNP",
      "1.9": "De≈à √östavy",
      "15.9": "Sedembolestn√° Panna M√°ria",
      "1.11": "Sviatok v≈°etk√Ωch sv√§t√Ωch",
      "17.11": "De≈à boja za slobodu",
      "24.12": "≈†tedr√Ω de≈à",
      "25.12": "1. sviatok vianoƒçn√Ω",
      "26.12": "2. sviatok vianoƒçn√Ω"
    };

    const daysShort = ["Po", "Ut", "St", "≈†t", "Pi", "So", "Ne"];
    const monthNames = ["Janu√°r", "Febru√°r", "Marec", "Apr√≠l", "M√°j", "J√∫n", "J√∫l", "August", "September", "Okt√≥ber", "November", "December"];
    let currentYear = new Date().getFullYear();

    function renderCalendar(year) {
      document.getElementById("calendar").innerHTML = "";
      document.getElementById("yearDisplay").textContent = year;
      const today = new Date();

      for (let m = 0; m < 12; m++) {
        const month = document.createElement("div");
        month.className = "month";

        const h3 = document.createElement("h3");
        h3.textContent = monthNames[m];
        month.appendChild(h3);

        const daysDiv = document.createElement("div");
        daysDiv.className = "days";

        for (let i = 0; i < 7; i++) {
          const dow = document.createElement("div");
          dow.className = "dow";
          dow.textContent = daysShort[i];
          daysDiv.appendChild(dow);
        }

        const firstDay = new Date(year, m, 1);
        let startDay = (firstDay.getDay() + 6) % 7;

        for (let i = 0; i < startDay; i++) {
          daysDiv.appendChild(document.createElement("div"));
        }

        const totalDays = new Date(year, m + 1, 0).getDate();

        for (let d = 1; d <= totalDays; d++) {
          const dateKey = `${d}.${m+1}`;
          const div = document.createElement("div");
          div.className = "day";
          div.textContent = d;

          const dateId = `${year}-${m+1}-${d}`;
          const note = localStorage.getItem(dateId);
          if (note) div.classList.add("note");

          if (holidays[dateKey]) {
            div.classList.add("holiday");
            div.title = holidays[dateKey];
          }

          if (
            d === today.getDate() &&
            m === today.getMonth() &&
            year === today.getFullYear()
          ) {
            div.classList.add("today");
          }

          div.onclick = () => {
            const text = prompt(`Prida≈• pozn√°mku na ${d}.${m+1}.${year}:`, note || "");
            if (text) {
              localStorage.setItem(dateId, text);
              div.classList.add("note");
            } else {
              localStorage.removeItem(dateId);
              div.classList.remove("note");
            }
          };

          daysDiv.appendChild(div);
        }

        month.appendChild(daysDiv);
        document.getElementById("calendar").appendChild(month);
      }
    }

    function changeYear(offset) {
      currentYear += offset;
      renderCalendar(currentYear);
    }

    function aktualizujCas() {
      const teraz = new Date();
      const moznosti = {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      };
      document.getElementById('cas').textContent =
        `üïì Aktu√°lny ƒças: ${teraz.toLocaleDateString('sk-SK', moznosti)}`;
    }

    renderCalendar(currentYear);
    setInterval(aktualizujCas, 1000);
    aktualizujCas();
  </script>
</body>
</html>
