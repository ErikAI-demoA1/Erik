<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>游 ErikAI Kombin치tor Obr치zkov (Mix)</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f8f9fa;
      padding: 20px;
      text-align: center;
    }
    input, select, button {
      padding: 10px;
      margin: 5px;
      font-size: 16px;
    }
    #output {
      margin-top: 20px;
    }
    .canvas-wrap {
      position: relative;
      display: inline-block;
    }
    canvas {
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>

<h2>游 ErikAI Kombin치tor Obr치zkov (Mix)</h2>
<p>Vyber 2 obr치zky a 코t칳l mie코ania:</p>

<input type="file" id="img1" accept="image/*">
<input type="file" id="img2" accept="image/*"><br>

<select id="mixMode">
  <option value="overlay">游댩 Priesvitn칠 prekrytie</option>
  <option value="flip">游댃 Zrkadlenie + Oto캜enie</option>
  <option value="hue">游깯 Farebn칳 filter (mix)</option>
</select><br>

<button onclick="mixImages()">游빍 Kombinuj obr치zky</button>

<div id="output"></div>

<script>
  function mixImages() {
    const file1 = document.getElementById('img1').files[0];
    const file2 = document.getElementById('img2').files[0];
    const mode = document.getElementById('mixMode').value;
    const output = document.getElementById('output');

    if (!file1 || !file2) {
      output.innerHTML = "丘멆잺 Nahraj 2 obr치zky.";
      return;
    }

    const img1 = new Image();
    const img2 = new Image();
    const reader1 = new FileReader();
    const reader2 = new FileReader();

    reader1.onload = function (e1) {
      img1.src = e1.target.result;
    };
    reader2.onload = function (e2) {
      img2.src = e2.target.result;
    };

    img1.onload = () => {
      img2.onload = () => {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');

        const width = Math.min(img1.width, img2.width, 500);
        const height = Math.min(img1.height, img2.height, 500);

        canvas.width = width;
        canvas.height = height;

        if (mode === 'overlay') {
          ctx.globalAlpha = 1;
          ctx.drawImage(img1, 0, 0, width, height);
          ctx.globalAlpha = 0.4;
          ctx.drawImage(img2, 0, 0, width, height);
        } else if (mode === 'flip') {
          ctx.save();
          ctx.translate(width, 0);
          ctx.scale(-1, 1);
          ctx.drawImage(img1, 0, 0, width, height);
          ctx.restore();
          ctx.translate(0, height / 2);
          ctx.rotate(Math.PI / 10);
          ctx.drawImage(img2, 0, 0, width, height);
        } else if (mode === 'hue') {
          ctx.drawImage(img1, 0, 0, width, height);
          ctx.globalCompositeOperation = "hue";
          ctx.drawImage(img2, 0, 0, width, height);
        }

        const resultImg = new Image();
        resultImg.src = canvas.toDataURL("image/png");
        resultImg.style.maxWidth = "100%";
        resultImg.style.border = "1px solid #ccc";
        resultImg.style.borderRadius = "8px";

        output.innerHTML = "<h3>游 V칳sledn칳 obr치zok:</h3>";
        output.appendChild(resultImg);
      };
      reader2.readAsDataURL(file2);
    };
    reader1.readAsDataURL(file1);
  }
</script>

</body>
</html>
