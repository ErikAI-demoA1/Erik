<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>游 ErikAI Kombin치tor Obr치zkov (Mix)</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; text-align: center; }
    h1 { color: #a30000; }
    select, button, input { padding: 10px; margin: 10px; font-size: 16px; }
    #vysledok img { max-width: 90%; margin-top: 20px; border: 2px solid #aaa; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>游 <b style="color:#b30000;">ErikAI Kombin치tor Obr치zkov (Mix)</b></h1>
  <p>Vyber 2 obr치zky a ErikAI ich premie코a n치hodne ako umelec:</p>

  <input type="file" id="obrazok1"><br>
  <input type="file" id="obrazok2"><br>

  <button onclick="kombinujNahodne()">游꿛 Kombinuj obr치zky n치hodne</button>

  <div id="vysledok"></div>

  <script>
    const styly = ["farebny", "dualna", "zrkadlo", "deformacia", "chaos", "rotacia", "pixelmix", "umely_hluk"];

    function kombinujNahodne() {
      const styl = styly[Math.floor(Math.random() * styly.length)];
      const o1 = document.getElementById("obrazok1").files[0];
      const o2 = document.getElementById("obrazok2").files[0];

      if (!o1 || !o2) {
        document.getElementById("vysledok").innerHTML = "丘멆잺 Nahraj oba obr치zky!";
        return;
      }

      const reader1 = new FileReader();
      const reader2 = new FileReader();

      reader1.onload = function(e1) {
        reader2.onload = function(e2) {
          const img1 = new Image();
          const img2 = new Image();
          img1.src = e1.target.result;
          img2.src = e2.target.result;

          img1.onload = () => {
            img2.onload = () => {
              const canvas = document.createElement("canvas");
              const ctx = canvas.getContext("2d");

              canvas.width = Math.max(img1.width, img2.width);
              canvas.height = Math.max(img1.height, img2.height);

              switch (styl) {
                case "farebny":
                  ctx.filter = `hue-rotate(${Math.random()*360}deg)`;
                  ctx.drawImage(img1, 0, 0);
                  ctx.filter = `contrast(${1 + Math.random()*0.5})`;
                  ctx.drawImage(img2, 0, 0);
                  break;
                case "dualna":
                  ctx.globalAlpha = 1;
                  ctx.drawImage(img1, 0, 0);
                  ctx.globalAlpha = 0.4 + Math.random()*0.5;
                  ctx.drawImage(img2, 0, 0);
                  break;
                case "zrkadlo":
                  ctx.translate(canvas.width, 0);
                  ctx.scale(-1, 1);
                  ctx.drawImage(img1, 0, 0);
                  ctx.setTransform(1, 0, 0, 1, 0, 0);
                  ctx.drawImage(img2, canvas.width/2, 0, canvas.width/2, canvas.height);
                  break;
                case "deformacia":
                  ctx.drawImage(img1, 0, 0);
                  ctx.translate(Math.random()*50, Math.random()*50);
                  ctx.rotate(Math.random() * 1);
                  ctx.globalAlpha = 0.5 + Math.random()*0.5;
                  ctx.drawImage(img2, 0, 0);
                  break;
                case "chaos":
                  ctx.filter = `brightness(${1 + Math.random()*0.5})`;
                  ctx.drawImage(img2, Math.random()*50, Math.random()*50);
                  ctx.filter = "sepia(0.7)";
                  ctx.globalAlpha = 0.6 + Math.random()*0.3;
                  ctx.drawImage(img1, 20 + Math.random()*30, 30 + Math.random()*30);
                  break;
                case "rotacia":
                  ctx.translate(canvas.width/2, canvas.height/2);
                  ctx.rotate((Math.random() * 360) * Math.PI / 180);
                  ctx.drawImage(img1, -img1.width/2, -img1.height/2);
                  ctx.rotate((Math.random() * 180) * Math.PI / 180);
                  ctx.drawImage(img2, -img2.width/2, -img2.height/2);
                  break;
                case "pixelmix":
                  ctx.drawImage(img1, 0, 0);
                  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                  for (let i = 0; i < imageData.data.length; i += 4) {
                    imageData.data[i] = imageData.data[i] ^ (Math.random() * 255);
                    imageData.data[i+1] = imageData.data[i+1] ^ (Math.random() * 255);
                  }
                  ctx.putImageData(imageData, 0, 0);
                  ctx.globalAlpha = 0.5;
                  ctx.drawImage(img2, Math.random()*20, Math.random()*20);
                  break;
                case "umely_hluk":
                  ctx.drawImage(img1, 0, 0);
                  let d = ctx.getImageData(0, 0, canvas.width, canvas.height);
                  for (let i = 0; i < d.data.length; i += 4) {
                    d.data[i] += Math.random()*50 - 25;
                    d.data[i+1] += Math.random()*50 - 25;
                    d.data[i+2] += Math.random()*50 - 25;
                  }
                  ctx.putImageData(d, 0, 0);
                  ctx.globalAlpha = 0.6;
                  ctx.drawImage(img2, 0, 0);
                  break;
              }

              const vysledny = canvas.toDataURL();
              document.getElementById("vysledok").innerHTML = `<img src="${vysledny}" alt="Mix obr치zkov (ErikAI)">`;
            }
          }
        };
        reader2.readAsDataURL(o2);
      };
      reader1.readAsDataURL(o1);
    }
  </script>
</body>
</html>
