<!DOCTYPE html><html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>ErikAI PDFsk</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f2f2f2; }
    h1 { color: #1976d2; }
    .button { padding: 10px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
    .green { background-color: #4CAF50; color: white; }
    .yellow { background-color: #ffc107; }
    .red { background-color: #f44336; color: white; }
    .gray { background-color: #e0e0e0; }
    .file-list span { margin: 5px; padding: 5px 10px; background: #fff176; display: inline-block; border-radius: 4px; cursor: pointer; }
    .file-list span:hover { background: #ffee58; }
  </style>
</head>
<body>  <h1>📄 ErikAI PDFsk</h1>  <h3>Vyber PDF s obrázkami:</h3>
  <input type="file" id="pdfInput" accept="application/pdf">
  <p id="selectedFileName" style="color: green"></p>  <h3>📂 Možnosti konverzie:</h3>
  <button class="button green" onclick="exportAs('text')">Stiahnuť ako Text</button>
  <button class="button green" onclick="exportAs('word')">Stiahnuť ako Word</button>
  <button class="button green" onclick="exportAs('excel')">Stiahnuť ako Excel</button>  <h3>📁 Lokálna práca:</h3>
  <button class="button yellow" onclick="savePDFLocal()">💾 Uložiť PDF lokálne</button>
  <button class="button yellow" onclick="loadPDFLocal()">📂 Načítať PDF</button>  <h3>📖 Uložené PDF dokumenty:</h3>
  <div class="file-list" id="savedFiles"></div>  <script>
    let currentPDF = null;

    document.getElementById('pdfInput').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (file && file.type === "application/pdf") {
        currentPDF = file;
        document.getElementById("selectedFileName").innerText = "✅ Súbor: " + file.name;
      }
    });

    function exportAs(type) {
      if (!currentPDF) {
        alert("Najprv vyber PDF súbor.");
        return;
      }

      // Simulácia exportu (skutočný OCR/konverzný engine by bol cez server/API)
      const blob = new Blob(["Simulácia extrakcie obsahu z " + currentPDF.name], {type: 'text/plain'});
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = currentPDF.name.replace(".pdf", "." + type);
      link.click();
    }

    function savePDFLocal() {
      if (!currentPDF) {
        alert("Najprv vyber PDF na uloženie.");
        return;
      }
      const reader = new FileReader();
      reader.onload = function(e) {
        localStorage.setItem("pdf_" + currentPDF.name, e.target.result);
        updateSavedList();
        alert("PDF uložené lokálne ako: " + currentPDF.name);
      }
      reader.readAsDataURL(currentPDF);
    }

    function loadPDFLocal() {
      const keys = Object.keys(localStorage).filter(k => k.startsWith("pdf_"));
      if (keys.length === 0) {
        alert("Nie sú uložené PDF dokumenty.");
        return;
      }
      const name = prompt("Zadaj názov PDF na načítanie:", keys[0].replace("pdf_", ""));
      const fileData = localStorage.getItem("pdf_" + name);
      if (!fileData) {
        alert("PDF súbor sa nenašiel.");
        return;
      }
      currentPDF = new File([fileData], name, { type: "application/pdf" });
      document.getElementById("selectedFileName").innerText = "✅ Súbor: " + name;
    }

    function updateSavedList() {
      const container = document.getElementById("savedFiles");
      container.innerHTML = "";
      const keys = Object.keys(localStorage).filter(k => k.startsWith("pdf_"));
      keys.forEach(k => {
        const span = document.createElement("span");
        const name = k.replace("pdf_", "");
        span.innerText = name;
        span.onclick = () => {
          const data = localStorage.getItem(k);
          currentPDF = new File([data], name, { type: "application/pdf" });
          document.getElementById("selectedFileName").innerText = "✅ Súbor: " + name;
        }
        const del = document.createElement("button");
        del.innerText = "❌";
        del.className = "button red";
        del.onclick = (e) => {
          e.stopPropagation();
          if (confirm("Naozaj vymazať " + name + "?")) {
            localStorage.removeItem(k);
            updateSavedList();
          }
        }
        span.appendChild(del);
        container.appendChild(span);
      });
    }

    updateSavedList();
  </script></body>
</html>
