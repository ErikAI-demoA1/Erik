<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>ErikAI Speedmeter</title>
  <style>
    body { font-family: sans-serif; text-align: center; }
    #result { font-size: 1.4em; margin-top: 1em; }
    button { font-size: 1em; padding: 10px 20px; }
  </style>
</head>
<body>
  <h1>📶 ErikAI Speedmeter</h1>
  <p>Zmeraj si rýchlosť svojho internetu</p>
  <button onclick="startTest()">▶️ Spustiť meranie</button>
  <div id="result">⬜ Čakám na meranie...</div>

  <script>
    function startTest() {
      const fileUrl = "https://speed.hetzner.de/10MB.bin"; // verejný súbor na test
      const startTime = new Date().getTime();
      const resultDiv = document.getElementById("result");
      
      fetch(fileUrl, { method: 'GET', cache: 'no-store' })
        .then(response => response.blob())
        .then(blob => {
          const endTime = new Date().getTime();
          const duration = (endTime - startTime) / 1000;
          const bitsLoaded = blob.size * 8;
          const speedMbps = (bitsLoaded / duration / 1024 / 1024).toFixed(2);
          resultDiv.innerHTML = `🔍 Rýchlosť: <strong>${speedMbps} Mbps</strong>`;
        })
        .catch(() => {
          resultDiv.innerHTML = "❌ Nepodarilo sa zmerať rýchlosť.";
        });
    }
  </script>
</body>
</html>
